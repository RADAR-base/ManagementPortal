<div>
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <h1 [translate]="'reset.finish.title'"></h1>

            <div *ngIf="keyMissing"
                 [translate]="'reset.finish.messages.keymissing'"
                 class="alert alert-danger">
            </div>

            <div *ngIf="!success && !keyMissing" class="alert alert-warning">
                <p [translate]="'reset.finish.messages.info'"></p>
            </div>

            <div *ngIf="error" class="alert alert-danger">
                <p [translate]="'reset.finish.messages.error'"></p>
            </div>

            <p *ngIf="success" class="alert alert-success">
                <span [translate]="'reset.finish.messages.success'"></span>
                <a (click)="login()" [translate]="'global.messages.info.authenticated.link'" class="alert-link"></a>.
            </p>

            <div *ngIf="doNotMatch" [translate]="'global.messages.error.dontmatch'"
                 class="alert alert-danger">
            </div>

            <div *ngIf="weakPassword" [translate]="'global.messages.error.weakpassword'"
                 class="alert alert-danger">
            </div>

            <div *ngIf="!keyMissing">
                <form #passwordForm="ngForm" (ngSubmit)="finishReset()" *ngIf="!success" name="form" role="form">
                    <div class="form-group">
                        <label [translate]="'global.form.newpassword'" class="form-control-label"
                               for="password">
                        </label>
                        <input #passwordField #passwordInput="ngModel"
                               [(ngModel)]="resetAccount.password" class="form-control"
                               id="password" maxlength=100
                               minlength=8
                               name="password"
                               placeholder="{{'global.form.newpassword.placeholder' | translate}}" required
                               type="password">
                        <div *ngIf="passwordInput.dirty && passwordInput.invalid">
                            <small *ngIf="passwordInput.errors.required"
                                   [translate]="'global.messages.validate.newpassword.required'"
                                   class="form-text text-danger">
                            </small>
                            <small *ngIf="passwordInput.errors.minlength"
                                   [translate]="'global.messages.validate.newpassword.minlength'"
                                   class="form-text text-danger">
                            </small>
                            <small *ngIf="passwordInput.errors.maxlength"
                                   [translate]="'global.messages.validate.newpassword.maxlength'"
                                   class="form-text text-danger">
                            </small>
                        </div>
                        <jhi-password-strength-bar
                                [passwordToCheck]="resetAccount.password"></jhi-password-strength-bar>
                    </div>

                    <div class="form-group">
                        <label [translate]="'global.form.confirmpassword'"
                               class="form-control-label"
                               for="confirmPassword">
                        </label>
                        <input #confirmPasswordInput="ngModel" [(ngModel)]="confirmPassword" class="form-control"
                               id="confirmPassword"
                               maxlength=100
                               minlength=8
                               name="confirmPassword"
                               placeholder="{{'global.form.confirmpassword.placeholder' | translate}}" required
                               type="password">
                        <div *ngIf="confirmPasswordInput.dirty && confirmPasswordInput.invalid">
                            <small *ngIf="confirmPasswordInput.errors.required"
                                   [translate]="'global.messages.validate.confirmpassword.required'"
                                   class="form-text text-danger">
                            </small>
                            <small *ngIf="confirmPasswordInput.errors.minlength"
                                   [translate]="'global.messages.validate.confirmpassword.minlength'"
                                   class="form-text text-danger">
                            </small>
                            <small *ngIf="confirmPasswordInput.errors.maxlength"
                                   [translate]="'global.messages.validate.confirmpassword.maxlength'"
                                   class="form-text text-danger">
                            </small>
                        </div>
                    </div>
                    <button [disabled]="passwordForm.form.invalid" [translate]="'reset.finish.form.button'"
                            class="btn btn-primary"
                            type="submit">
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
